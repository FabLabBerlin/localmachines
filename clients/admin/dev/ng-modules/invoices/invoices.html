<div id="admin-activations" class="container-fluid">

  <h1>Invoices</h1>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>From</th>
        <th>To</th>
        <th>Created on</th>
        <th>&nbsp;</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="invoice in invoices">
        <td>{{invoice.MonthFrom}}/{{invoice.YearFrom}}</td>
        <td>{{invoice.MonthTo}}/{{invoice.YearTo}}</td>
        <td>{{invoice.Created | date:'yyyy-MM-dd HH:mm'}}</td>
        <td>
          <span class="pull-right">
            <button type="button"
                     class="btn btn-ico fastbill-icon"
                     ng-click="createFbDraftsPrompt(invoice.Id)">
              <img src="/admin/assets/img/fastbill-logo.png">
            </button>&nbsp;&nbsp;
            <a class="btn btn-primary btn-ico"
               href="/api/invoices/{{invoice.Id}}/download_excel">
              <span class="fa fa-download"></span>
            </a>&nbsp;&nbsp;
            <button type="button" class="btn btn-danger btn-ico"
                    ng-click="deleteInvoicePrompt(invoice.Id)">
              <span class="fa fa-close"></span>
            </button>
          </span>
        </td>
      </tr>
    </tbody>
  </table>

</div> <!-- /container -->

<div ng-show="draftsReport" class="container-fluid">
  <h1>Result of Fastbill Draft Creation</h1>
  <h2>Successful Invoice Drafts</h2>
  <h5>This includes already exported Drafts but excludes users with 0 € bill</h5>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>E-Mail</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="id in draftsReport.SuccessUids">
        <td>{{usersById[id].FirstName}} {{usersById[id].LastName}}</td>
        <td>
          <a href="https://easylab.io/admin/#/users/{{id}}">{{usersById[id].Email}}</a>
        </td>
      </tr>
    </tbody>
  </table>
  <h2>Already exported Drafts</h2>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>E-Mail</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="id in draftsReport.AlreadyExportedUids">
        <td>{{usersById[id].FirstName}} {{usersById[id].LastName}}</td>
        <td>
          <a href="https://easylab.io/admin/#/users/{{id}}">{{usersById[id].Email}}</a>
        </td>
      </tr>
    </tbody>
  </table>
  <h2>Users that had 0 € that month</h2>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>E-Mail</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="id in draftsReport.EmptyUids">
        <td>{{usersById[id].FirstName}} {{usersById[id].LastName}}</td>
        <td>
          <a href="https://easylab.io/admin/#/users/{{id}}">{{usersById[id].Email}}</a>
        </td>
      </tr>
    </tbody>
  </table>
  <h2>Users with errors</h2>
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>Name</th>
        <th>E-Mail</th>
        <th>Error Name</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="e in draftsReport.Errors">
        <td>{{usersById[e.UserId].FirstName}} {{usersById[e.UserId].LastName}}</td>
        <td>
          <a href="https://easylab.io/admin/#/users/{{e.UserId}}">{{usersById[e.UserId].Email}}</a>
        </td>
        <td>
          {{e.Problem}}
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div id="loader-global" ng-show="loading">
  <div class="spinner">
    <i class="fa fa-cog fa-spin"></i>
  </div>
</div>
