<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Julius Webpage</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.13.3/JSXTransformer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <!-- <script src="/public/script.js"></script> -->
	<!-- CSS: -->
	<style>
	#main {
		border-width: 1px;
		border-color: black;
	}
	</style>
</head>

<body>

	<div id="content"></div>

	<script type="text/jsx">
/*
if (foo) { console.log('bla'); } console.log('bla');
*/
		var PingerComponent = React.createClass({
			getInitialState: function() {
				return {
					response: undefined
				};
			},
			// "init"
			componentWillMount: function() {
				this.update();
				setInterval(function() {
					this.update();
				}.bind(this), 20000);
			},
			update: function() {
						$.ajax({
							url: 'http://localhost:5000/get_list',
							type: 'GET',
							dataType: 'json',
							success: function(response){
								console.log(response);
								this.setState({
									data: response.status
								});
							}.bind(this),
							error: function(error){
								console.log(error);
							}
						});
			},
			render: function() {
				console.log(this.state)
				return(
					<div id="main">
						
						<p>{this.state.data}</p>
					</div>
				);
			}
		});
		React.render(
			<div>
				<h3>MACHINES STATUS</h3>
				<PingerComponent></PingerComponent>
			</div>, 

			document.getElementById('content'));

	</script>

</body>
</html>